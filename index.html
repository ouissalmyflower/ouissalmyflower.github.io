<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ouissal & Salah</title>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@500;700;800&family=Caveat:wght@600;700&display=swap');

  html, body {
    height: 100%;
    margin: 0;
    box-sizing: border-box;
    min-height: 100vh;
    width: 100vw;
    background: linear-gradient(135deg, #ffffff 0%, #292929 100%);
    font-family: 'Poppins', sans-serif;
    color: #ffe6f0;
    overflow-x: hidden;
  }
  body {
    width: 100vw;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: none;
  }

  /* Moving texts with fade edges and horizontal scroll */
  #moving-text-top,
  #moving-text-bottom {
    width: 100vw;
    padding: 10px 0;
    overflow: hidden;
    white-space: nowrap;
    color: #000000;
    font-weight: 800;
    font-size: 20px;
    user-select: none;
    position: fixed;
    left: 0;
    z-index: 1000;
    pointer-events: none;
    backdrop-filter: blur(0px);
    -webkit-mask-image: linear-gradient(90deg, rgba(0, 0, 0, 0) 0%, #000 8%, #000 92%, rgba(0,0,0,0) 100%);
            mask-image: linear-gradient(90deg, rgba(0,0,0,0) 0%, #000 8%, #000 92%, rgba(0,0,0,0) 100%);
  }
  #moving-text-top { top: 0; }
  #moving-text-bottom { bottom: 0; }
  #moving-text-top span,
  #moving-text-bottom span {
    display: inline-block;
    padding-left: 100%;
    animation: marquee 15s linear infinite;
  }
  @keyframes marquee {
    0%   { transform: translateX(0); }
    100% { transform: translateX(-100%); }
  }

  /* Container for profiles */
  #container {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 92vw;
    max-width: 980px;
    gap: clamp(23px, 1vw, 45px);
    margin: 80px 0 100px;
    padding: 0 16px;
    background: none;
    border: none;
  }

  /* Profile styles */
  .profile {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    border: none;
    background: transparent;
    padding: 6px;
    border-radius: 24px;
    transition: transform .28s ease, filter .28s ease;
    outline: none;
  }
  .profile:focus-visible { box-shadow: 0 0 0 4px rgba(66, 66, 66, 0.25); }
  .profile:hover { transform: translateY(-2px) scale(1.02); filter: saturate(1.06); }

  .profile img {
    width: clamp(140px, 22vw, 200px);
    height: clamp(140px, 22vw, 200px);
    border-radius: 24px;
    object-fit: cover;
    box-shadow: 0 15px 40px rgba(204, 204, 204, 0.6);
    transition: box-shadow .35s ease, transform .35s ease;
  }
  .profile:hover img {
    box-shadow: 0 20px 48px rgba(204, 204, 204, 0.6);
    transform: scale(1.07);
  }

  #ouissal-text, #salah-text {
    margin-top: 14px;
    font-size: clamp(22px, 3.5vw, 34px);
    white-space: nowrap;
    transition: color .35s ease, transform .25s ease;
    letter-spacing: 0.35px;
  }
  #ouissal-text { color: #000000; font-weight: 800; text-shadow: 0 1px 6px #000000; }
  #salah-text  { color: #ffffff; font-weight: 800; text-shadow: 0 1px 6px #ffffff; }
  .profile:hover #ouissal-text { transform: translateY(-1px); }
  .profile:hover #salah-text  { transform: translateY(-1px); }

  .hand { font-family: 'Caveat', cursive; }

  #player-controls {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    position: relative;
    background: none;
    border: none;
  }

  /* Smooth/glassy dropdown under the Amor button */
  #song-selector {
    background: linear-gradient(180deg, rgba(37, 37, 37, 0.06), rgba(109, 109, 109, 0.02));
    color: #000000;
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 16px;
    padding: 10px 16px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    outline: none;
    text-align: center;
    box-shadow: 0 10px 30px rgba(10,10,10,0.35);
    transition: transform .28s ease, box-shadow .28s ease, border-color .28s ease;
    width: min(72vw, 320px);
    max-width: 320px;
    -webkit-appearance: none;
    appearance: none;
    backdrop-filter: blur(6px);
  }
  #song-selector:hover { transform: translateY(-2px) scale(1.01); border-color: rgba(59, 59, 59, 0.22); box-shadow: 0 16px 36px rgba(36, 35, 35, 0.45); }
  #song-selector:focus { box-shadow: 0 0 18px rgba(65, 64, 64, 0.25); border-color: rgba(3, 3, 3, 0.38); }

  /* Volume slider */
  #volume-slider {
    width: min(70vw, 340px);
    height: 12px;
    -webkit-appearance: none;
    appearance: none;
    background: linear-gradient(90deg, #000000 0%, #000 100%);
    border-radius: 10px;
    cursor: pointer;
    outline: none;
    margin: 0;
    user-select: none;
    box-shadow: 0 6px 18px rgba(20, 20, 20, 0.35);
  }
  #volume-slider::-webkit-slider-runnable-track { height: 12px; border-radius: 10px; }
  #volume-slider::-moz-range-track             { height: 12px; border-radius: 10px; }
  #volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 28px; height: 28px;
    background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" font-family="Arial" font-size="24"><text y="20" font-size="20">üêª‚Äç‚ùÑÔ∏è</text></svg>') no-repeat center/22px 22px;
    border-radius: 50%;
    border: none;
    margin-top: -8px;
    cursor: pointer;
    transition: transform .15s ease-in-out;
  }
  #volume-slider::-webkit-slider-thumb:hover { transform: scale(1.15); }
  #volume-slider::-moz-range-thumb {
    width: 28px; height: 28px; border-radius: 50%; border: none; cursor: pointer;
    background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" font-family="Arial" font-size="24"><text y="20" font-size="20">üêª‚Äç‚ùÑÔ∏è</text></svg>') no-repeat center/22px 22px;
    transition: transform .15s ease-in-out;
  }

  /* Play/Pause button */
  #flower-btn {
    padding: 14px 48px;
    font-size: 24px;
    font-weight: 900;
    color: #fff;
    background: linear-gradient(135deg, #000000, #db6464);
    border: none;
    border-radius: 40px;
    cursor: pointer;
    box-shadow: 0 16px 42px rgba(255, 255, 255, 0.35);
    transition: transform .25s ease, filter .35s ease, background .35s ease;
    user-select: none;
    filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.12));
  }
  #flower-btn:hover {
    transform: translateY(-2px) scale(1.02);
    filter: brightness(1.08);
  }

  /* Now playing label */
  #now-playing {
    font-family: 'Caveat', cursive;
    margin-top: 6px;
    font-size: 15px;
    color: #0a0a0a;
    opacity: 0.95;
    text-shadow: 0 1px 6px rgba(0,0,0,0.6);
  }

  /* Floating gold hearts */
  .particle {
    position: fixed;
    width: 24px; height: 24px;
    pointer-events: none;
    background-size: contain;
    animation-timing-function: ease-out;
    z-index: 999;
  }
  .particle.gold {
    background-image: url('data:image/svg+xml;utf8,<svg fill="%23FFD700" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>');
    filter: drop-shadow(0 0 6px #f0eeef);
  }
  .particle.sparkle {
    background-image: url('data:image/svg+xml;utf8,<svg fill="%23FFD700" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="2"/></svg>');
    width: 8px; height: 8px;
  }

  /* Modal styles */
  .modal-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.35);
    backdrop-filter: blur(6px);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    z-index: 2000;
    display: grid;
    place-items: center;
  }
  .modal-backdrop.show {
    opacity: 1;
    pointer-events: auto;
  }
  .modal {
    background: #fff;
    color: #030303;
    border-radius: 22px;
    padding: clamp(18px, 4vw, 28px);
    width: min(88vw, 520px);
    box-shadow: 0 30px 80px rgba(0,0,0,0.25);
    transform: translateY(10px) scale(0.97);
    opacity: 0;
    transition: transform 0.28s ease, opacity 0.28s ease;
    text-align: center;
  }
  .modal-backdrop.show .modal {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  .modal h2 {
    margin: 0 0 8px;
    font-size: clamp(26px, 5vw, 36px);
    font-family: 'Caveat', cursive;
    font-weight: 700;
    text-shadow: 0 0 4px #f5f4f4;
  }
  .modal p {
    margin: 6px 0 14px;
    font-size: clamp(16px, 3.4vw, 20px);
    line-height: 1.45;
    font-family: 'Caveat', cursive;
    text-shadow: 0 0 4px #dddbdc;
  }
  footer {
    position: fixed;
    bottom: 13px;
    top: 3px;
    left: 0; right: 0;
    text-align: center;
    font-size: 15px;
    color: #b9b9b9;
    opacity: 0.9;
    pointer-events: none;
    font-family: 'Caveat', cursive;
    font-weight: 700;
  }
  #heart {
    position: absolute;
    font-size: 36px;
    color: #ffffff;
    opacity: 0;
    pointer-events: none;
    user-select: none;
    z-index: 1500;
    transition: opacity 0.3s ease;
  }
  #love-meter-container {
    position: fixed;
    top: 50%;
    right: 20px;
    transform: translateY(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 10px 15px;
    z-index: 3000;
  }
  #love-meter {
    width: 20px;
    height: 200px;
    background: linear-gradient(to top, #fafafa 0%, #cac9c9 100%);
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 10px;
    position: relative;
    box-shadow: inset 0 0 12px rgba(218, 211, 211, 0.6);
  }
  #love-fill {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 0%; 
    background: linear-gradient(135deg, #242424, #000000);
    border-radius: 10px 10px 0 0;
    transition: height 0.3s ease;
  }
  #love-percentage {
    color: #f7f7f7;
    font-weight: 700;
    font-family: 'Caveat', cursive;
    font-size: clamp(16px, 3.4vw, 20px);
  }
  #increase-love-btn {
    padding: 8px 12px;
    font-size: 14px;
    background: linear-gradient(135deg, #2b2a2b, #a8a7a8);
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 0 12px #ffffff;
    transition: background .25s ease;
  }
  #increase-love-btn:hover {
    background: linear-gradient(135deg, #ffffff, #94617b);
  }
</style>
</head>
<body>

<div id="moving-text-top"><span class="hand">Ouissal is the prettiest flower in the world</span></div>
<div id="moving-text-bottom"><span class="hand">Ouissal is the prettiest woman in the world</span></div>
<div id="container">
  <button class="profile" id="ouissal-profile" aria-label="Open message about Ouissal">
    <img src="oui.jpg" alt="Ouissal" />
    <div id="ouissal-text">Ouissal &lt;3</div>
  </button>
  <div id="player-controls">
    <input type="range" min="0" max="100" value="50" id="volume-slider" aria-label="Volume slider" />
    <button id="flower-btn" aria-label="Play Flower hearts and music">Amor</button>

    <!-- Song selector placed under the Amor button, with now-playing label -->
    <select id="song-selector" aria-label="Choose song">
      <option value="Bouncy.mp3">Bouncy</option>
      <option value="Habit.mp3">Habit</option>
      <option value="Dramaturgy.mp3">Dramaturgy</option>
    </select>
    <div id="now-playing" aria-live="polite">Now playing: -</div>
  </div>
  <button class="profile" id="salah-profile" aria-label="Open message about Salah">
    <img src="sal.jpg" alt="Salah"/>
    <div id="salah-text">Salah &lt;3</div>
  </button>
  <div id="heart">ü§ç</div>
</div>
<div id="love-meter-container">
  <div id="love-meter">
    <div id="love-fill"></div>
  </div>
  <button id="increase-love-btn" aria-label="Add love">Add Love</button>
  <div id="love-percentage">0%</div>
</div>
<div class="modal-backdrop" id="modal" tabindex="-1" role="dialog" aria-modal="true" aria-labelledby="modal-title">
  <div class="modal">
    <h2 id="modal-title" class="hand">For You</h2>
    <p id="modal-text">...</p>
  </div>
</div>
<audio id="local-audio" loop preload="auto">
  <!-- default source -->
  <source src="song.mp3" type="audio/mpeg" />
</audio>

<script>
  const flowerBtn = document.getElementById('flower-btn');
  const localAudio = document.getElementById('local-audio');
  const volumeSlider = document.getElementById('volume-slider');
  const ouissalBtn = document.getElementById('ouissal-profile');
  const salahBtn = document.getElementById('salah-profile');
  const modal = document.getElementById('modal');
  const modalText = document.getElementById('modal-text');
  const modalTitle = document.getElementById('modal-title');
  const loveFill = document.getElementById('love-fill');
  const lovePercentageText = document.getElementById('love-percentage');
  const songSelector = document.getElementById('song-selector');
  const nowPlaying = document.getElementById('now-playing');

  let lovePercent = 0;
  const lovePercentMax = 100;

  // Ensure the audio element's volume syncs with slider
  localAudio.volume = volumeSlider.value / 100;

  volumeSlider.addEventListener('input', () => {
    localAudio.volume = volumeSlider.value / 100;
  });

  // Utility to set "now playing" friendly label
  function friendlyTitleFromVal(val) {
    // Map filenames to pretty titles (keep emojis if desired)
    const map = {
      'Habit.mp3': 'Habit',
      'Bouncy.mp3': 'Bouncy',
      'Dramaturgy.mp3': 'Dramaturgy'
    };
    return map[val] || val;
  }

  // Initialize now-playing from initial <source> or selector
  function updateNowPlayingLabel(src) {
    // If passed a path, normalize to just filename
    const file = src ? src.split('/').pop() : (songSelector.value || 'song.mp3');
    nowPlaying.textContent = 'Now playing: ' + friendlyTitleFromVal(file);
  }
  // Initial label
  updateNowPlayingLabel(songSelector.value);

  // Play / Pause toggle behavior for the flower button
  flowerBtn.addEventListener('click', async () => {
    try {
      // if audio element doesn't have src set on .src (some browsers keep <source>)
      if (!localAudio.src || localAudio.src.includes('blob:')) {
        // set from select if needed
        localAudio.src = songSelector.value;
        localAudio.load();
      }
      if (localAudio.paused) {
        await localAudio.play();
        flowerBtn.textContent = 'Amor';
      } else {
        localAudio.pause();
        flowerBtn.textContent = 'Amor';
      }
    } catch (err) {
      console.error('Playback error:', err);
      alert('Please interact with the page (click) to allow audio playback.');
    }
  });

  // When the song is changed via selector: switch source, load, and auto-play
  songSelector.addEventListener('change', async () => {
    const newSong = songSelector.value;
    // set audio src explicitly
    localAudio.pause();
    // Some browsers require setting .src; remove child <source> to avoid confusion, then set .src
    // Clear existing <source> elements to make the element controlled from JS:
    const childSources = localAudio.querySelectorAll('source');
    childSources.forEach(s => s.remove());
    localAudio.src = newSong;
    localAudio.load();
    try {
      await localAudio.play();
      flowerBtn.textContent = 'Amor';
    } catch (err) {
      console.warn('Autoplay prevented:', err);
      flowerBtn.textContent = 'Amor';
    }
    updateNowPlayingLabel(newSong);
  });

  // Update nowPlaying when audio ends/starts
  localAudio.addEventListener('play', () => {
    // Make sure label matches the currently playing src
    const file = localAudio.src ? localAudio.src.split('/').pop() : songSelector.value;
    updateNowPlayingLabel(file);
  });

  localAudio.addEventListener('pause', () => {
    // Keep label but button shows "Amor"
  });

  // Modal and profile interactions
  function openModal(text, title='For You') {
    modalText.textContent = text;
    modalTitle.textContent = title;
    modal.classList.add('show');
  }
  ouissalBtn.addEventListener('click', () => {
    openModal('A sexy, kind and nice woman', 'Ouissal <3');
  });
  salahBtn.addEventListener('click', () => {
    openModal('my name's jeff', 'Salah <3');
  });
  modal.addEventListener('click', e => {
    if (e.target === modal) {
      modal.classList.remove('show');
    }
  });
  window.addEventListener('keydown', e => {
    if (e.key === 'Escape') {
      modal.classList.remove('show');
    }
  });

  // Love meter logic and celebration
  document.getElementById('increase-love-btn').addEventListener('click', () => {
    if (lovePercent < lovePercentMax) {
      lovePercent += 2;
      if (lovePercent > lovePercentMax) lovePercent = lovePercentMax;
      updateLoveMeter();
      if (lovePercent === lovePercentMax) {
        triggerCelebration();
      }
    }
  });

  function updateLoveMeter() {
    loveFill.style.height = lovePercent + '%';
    lovePercentageText.textContent = lovePercent.toFixed(1) + '%';
  }

  // Celebration with overlay + confetti
  function triggerCelebration() {
    const container = document.body;

    // Create a full-screen congratulation overlay
    const overlay = document.createElement('div');
    overlay.style.position = 'fixed';
    overlay.style.top = '0';
    overlay.style.left = '0';
    overlay.style.width = '100vw';
    overlay.style.height = '100vh';
    overlay.style.background = 'linear-gradient(90deg,rgba(255, 255, 255, 1) 0%, rgba(0, 0, 0, 1) 0%, rgba(166, 49, 38, 1) 100%)';
    overlay.style.display = 'flex';
    overlay.style.justifyContent = 'center';
    overlay.style.alignItems = 'center';
    overlay.style.zIndex = '9999';
    overlay.style.fontSize = '2.4em';
    overlay.style.color = '#fff';
    overlay.style.fontWeight = 'bold';
    overlay.style.backdropFilter = 'blur(15px)';
    overlay.style.textAlign = 'center';
    overlay.style.padding = '20px';
    overlay.innerText = "Hey ouissal, you made it this far, pressed the button to fill the bar quite a bit, and for that I just want to tell you that you are the nicest, prettiest and most loved human a man could ever ask for, I just want you to know that you are an amazing person and a very kind soul, as soon as I got connected with you, I felt some type of way that I never felt, and for that I want to say that I am incredibly proud of you, and will take care of you till the day I die..... Love - Salah";

    container.appendChild(overlay);

    // Animate confetti particles
    for (let i=0; i<120; i++) {
      createConfettiParticle(container);
    }

    // Remove overlay after 40 seconds
    setTimeout(() => {
      if (container.contains(overlay)) {
        container.removeChild(overlay);
      }
    }, 40000);
  }

  function createConfettiParticle(parent) {
    const confetti = document.createElement('div');
    confetti.style.position = 'fixed';
    confetti.style.width = `${6 + Math.random() * 10}px`;
    confetti.style.height = confetti.style.width;
    confetti.style.backgroundColor = `hsl(${Math.random()*360},70%,70%)`;
    confetti.style.borderRadius = '2px';
    confetti.style.top = '50%';
    confetti.style.left = '50%';
    confetti.style.pointerEvents = 'none';
    confetti.style.zIndex = '9999';
    parent.appendChild(confetti);
    const deltaX = (Math.random() - 0.5) * 1200;
    const deltaY = (Math.random() - 0.5) * 900;
    const rotate = Math.random() * 720;
    const duration = 2500 + Math.random() * 2000;
    const animation = confetti.animate([
      { transform: 'translate(0, 0) rotate(0deg)', opacity: 1 },
      { transform: `translate(${deltaX}px, ${deltaY}px) rotate(${rotate}deg)`, opacity: 0 }
    ], { duration, easing: 'cubic-bezier(.2,.8,.2,1)', fill: 'forwards' });
    animation.onfinish = () => { if (parent.contains(confetti)) parent.removeChild(confetti); };
  }

  // Initialize love meter label and settings
  updateLoveMeter();

  // Ensure initial audio source is aligned with selector (in case browsers didn't pick the <source>)
  (function initAudioSource() {
    // If the <audio> element doesn't expose a usable src, set it from the selector
    try {
      const initial = songSelector.value || 'song.mp3';
      // Remove child <source> elements so we control src via JS
      const childSources = localAudio.querySelectorAll('source');
      childSources.forEach(s => s.remove());
      localAudio.src = initial;
      localAudio.load();
      updateNowPlayingLabel(initial);
    } catch (err) {
      console.warn('Audio init warning:', err);
    }
  })();
</script>
</body>
</html>



